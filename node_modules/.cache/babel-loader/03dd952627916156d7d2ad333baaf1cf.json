{"ast":null,"code":"import _classCallCheck from \"/Users/sanjaysai/Documents/Dev/web/Mod4/project/school-management-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/sanjaysai/Documents/Dev/web/Mod4/project/school-management-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/sanjaysai/Documents/Dev/web/Mod4/project/school-management-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/sanjaysai/Documents/Dev/web/Mod4/project/school-management-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/sanjaysai/Documents/Dev/web/Mod4/project/school-management-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/sanjaysai/Documents/Dev/web/Mod4/project/school-management-frontend/src/components/updateForm.js\";\nimport React, { Component } from 'react';\nimport dateFns from \"date-fns\";\n\nvar UpdateForm =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(UpdateForm, _Component);\n\n  function UpdateForm() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, UpdateForm);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(UpdateForm)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      fromTime: 360,\n      toTime: 360\n    };\n\n    _this.checkInputs = function () {\n      console.log('bookForm.start_time', _this.props.bookForm.start_time === '');\n      if (_this.props.bookForm.start_time === '' && _this.props.bookForm.end_time === '') // && this.props.bookForm.event!=='')\n        // this.setState({submitButtonEnable:true})\n        return 'disabled';else return null;\n    };\n\n    _this.ifBooked = function (min) {\n      var timeBook = [];\n\n      var bookedHours = _this.props.lectureRoom.lecture_schedules.filter(function (sch) {\n        return dateFns.format(sch.date, 'YYYY-MM-DD') === dateFns.format(_this.props.selectedDate, 'YYYY-MM-DD');\n      });\n\n      bookedHours.forEach(function (sch) {\n        var bookedStartTime = (dateFns.getHours(sch.start_time) + 5) * 60 + dateFns.getMinutes(sch.start_time);\n        var bookedEndTime = (dateFns.getHours(sch.end_time) + 5) * 60 + dateFns.getMinutes(sch.end_time);\n        timeBook.push([bookedStartTime, bookedEndTime]);\n      });\n\n      for (var _i = 0; _i < timeBook.length; _i++) {\n        var hours = timeBook[_i];\n\n        if (min >= hours[0] && min < hours[1]) {\n          return 'disabled';\n        }\n      }\n    };\n\n    _this.populateSelectBox = function (min) {\n      var hours, minutes, ampm;\n      hours = Math.floor(min / 60);\n      minutes = min % 60;\n\n      if (minutes < 10) {\n        minutes = '0' + minutes; // adding leading zero\n      }\n\n      ampm = hours % 24 < 12 ? 'AM' : 'PM';\n      hours = hours % 12;\n\n      if (hours === 0) {\n        hours = 12;\n      }\n\n      return hours + ':' + minutes + ' ' + ampm;\n    };\n\n    _this.startTimeOptions = function () {\n      var optionTemp = [];\n\n      for (var i = 360; i <= 1320; i += 15) {\n        optionTemp.push(React.createElement(\"option\", {\n          key: i,\n          value: i,\n          disabled: _this.ifBooked(i),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        }, _this.populateSelectBox(i)));\n      }\n\n      return optionTemp;\n    };\n\n    _this.endTimeOptions = function () {\n      var optionTemp = [];\n\n      for (var i = _this.state.toTime; i <= 1320; i += 15) {\n        optionTemp.push(React.createElement(\"option\", {\n          key: i,\n          value: i,\n          disabled: _this.ifBooked(i),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }, _this.populateSelectBox(i)));\n      }\n\n      return optionTemp;\n    };\n\n    return _this;\n  }\n\n  _createClass(UpdateForm, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"form\", {\n        onSubmit: function onSubmit(e) {\n          _this2.props.onEditHandler(e, _this2.props.schedule);\n\n          _this2.props.toggleEditHandler();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, \"Start time\"), React.createElement(\"select\", {\n        name: \"start_time\",\n        onClick: this.startTimeOptions,\n        onChange: function onChange(e) {\n          _this2.props.onChangeBookForm(e);\n\n          _this2.setState({\n            fromTime: e.target.value,\n            toTime: Number(e.target.value) + 15\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, \"From\"), this.startTimeOptions()), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, \"End time\"), React.createElement(\"select\", {\n        name: \"end_time\",\n        onClick: this.endTimeOptions,\n        onChange: function onChange(e) {\n          return _this2.props.onChangeBookForm(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, \"To\"), this.endTimeOptions()), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, \"Event Name\"), React.createElement(\"input\", {\n        type: \"text\",\n        name: \"event\",\n        placeholder: \"enter event name\",\n        value: this.props.schedule.event,\n        onChange: function onChange(e) {\n          return _this2.props.onChangeBookForm(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"submit\",\n        value: \"Update\",\n        disabled: this.checkInputs(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return UpdateForm;\n}(Component);\n\nexport default UpdateForm;","map":{"version":3,"sources":["/Users/sanjaysai/Documents/Dev/web/Mod4/project/school-management-frontend/src/components/updateForm.js"],"names":["React","Component","dateFns","UpdateForm","state","fromTime","toTime","checkInputs","console","log","props","bookForm","start_time","end_time","ifBooked","min","timeBook","bookedHours","lectureRoom","lecture_schedules","filter","sch","format","date","selectedDate","forEach","bookedStartTime","getHours","getMinutes","bookedEndTime","push","hours","populateSelectBox","minutes","ampm","Math","floor","startTimeOptions","optionTemp","i","endTimeOptions","e","onEditHandler","schedule","toggleEditHandler","onChangeBookForm","setState","target","value","Number","event"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport dateFns from \"date-fns\";\n\n\nclass UpdateForm extends Component{\n\n    state={\n        fromTime:360,\n        toTime:360\n    }\n\n    checkInputs=() => {\n        console.log('bookForm.start_time',this.props.bookForm.start_time==='');\n        if(this.props.bookForm.start_time==='' && this.props.bookForm.end_time==='')// && this.props.bookForm.event!=='')\n            // this.setState({submitButtonEnable:true})\n            return 'disabled';\n        else \n            return null;\n    }\n\n\n    ifBooked=(min) => {\n        let timeBook=[];\n        const bookedHours=this.props.lectureRoom.lecture_schedules.filter(sch=>{\n            return dateFns.format(sch.date, 'YYYY-MM-DD')===dateFns.format(this.props.selectedDate, 'YYYY-MM-DD')\n\n        })\n        bookedHours.forEach(sch=>{\n            let bookedStartTime = ((dateFns.getHours(sch.start_time)+5)*60)+(dateFns.getMinutes(sch.start_time));\n            let bookedEndTime=((dateFns.getHours(sch.end_time)+5)*60)+(dateFns.getMinutes(sch.end_time));\n            timeBook.push([bookedStartTime, bookedEndTime])\n        })\n        \n        for(let hours of timeBook){\n            if (min>=hours[0] && min <hours[1]){\n                return 'disabled';\n            }\n       }\n\n    }\n\n    populateSelectBox=(min) => {\n        let hours, minutes, ampm;\n            hours = Math.floor(min / 60);\n            minutes = min % 60;\n            if (minutes < 10){\n                minutes = '0' + minutes; // adding leading zero\n            }\n            ampm = hours % 24 < 12 ? 'AM' : 'PM';\n            hours = hours % 12;\n            if (hours === 0){\n                hours = 12;\n            }\n            \n            return hours+':'+minutes+' '+ampm;\n    }\n\n    startTimeOptions=() => {\n        const optionTemp=[];\n        for(let i = 360; i <= 1320; i += 15){\n            optionTemp.push(<option key={i} value={i} disabled={this.ifBooked(i)}>\n            {this.populateSelectBox(i)}\n        </option>);\n        }\n        return optionTemp;\n        \n    }\n\n    endTimeOptions=() => {\n        const optionTemp=[];\n        for(let i = this.state.toTime; i <= 1320; i += 15){\n            optionTemp.push(<option key={i} value={i} disabled={this.ifBooked(i)}>\n            {this.populateSelectBox(i)}\n        </option>);\n        }\n        return optionTemp;\n        \n    }\n\n\n    render(){\n        return ( \n            <form onSubmit={(e)=>{this.props.onEditHandler(e, this.props.schedule);this.props.toggleEditHandler();}}>\n                <label>Start time</label>\n                <select name='start_time' onClick={this.startTimeOptions} onChange={(e)=>{\n                    this.props.onChangeBookForm(e);\n                    this.setState({fromTime:e.target.value, toTime:Number(e.target.value)+15});}}>\n                    \n                    <option>From</option>\n                    {this.startTimeOptions()}\n                </select>\n\n                <label>End time</label>\n                <select name='end_time' onClick={this.endTimeOptions} onChange={(e)=>this.props.onChangeBookForm(e)}>\n                    <option>To</option>\n                    {this.endTimeOptions()}\n                </select>\n\n                <label>Event Name</label>\n                <input type='text' name='event' placeholder='enter event name' value={this.props.schedule.event}\n                    onChange={(e)=>this.props.onChangeBookForm(e)}></input>\n\n                {/* <label>Mod Group</label>\n                <select onChange={(e)=>this.props.onChangeModSelectionHandler(e)}>\n                    <option>Choose Mod</option>\n                    {this.props.allMods.map(mod=>\n                        <option key={mod.id} value={mod.id}>{mod.name}</option>)}\n                </select> */}\n\n                <input type='submit' value='Update' disabled={this.checkInputs()}/>\n                {/* <button>Cancel</button> */}\n            </form>\n        );\n    }\n}\n \nexport default UpdateForm;"]},"metadata":{},"sourceType":"module"}